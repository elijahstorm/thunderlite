import{s as h,f as v,g as b,h as A,d as c,j as I,i as x,E as u,r as C}from"../chunks/scheduler.0cef3f82.js";import{S as g,i as _,b as $,d as y,m as M,a as w,t as S,e as k}from"../chunks/index.5079a6aa.js";import{M as D,c as E,m as d,l as f,u as L}from"../chunks/mapStore.a8604105.js";function j(o){let e,a,t;return a=new D({props:{map:o[2],select:void 0,makeImage:E(o[1]),loaded:o[0]}}),{c(){e=v("div"),$(a.$$.fragment),this.h()},l(r){e=b(r,"DIV",{class:!0});var l=A(e);y(a.$$.fragment,l),l.forEach(c),this.h()},h(){I(e,"class","p-6 h-screen")},m(r,l){x(r,e,l),M(a,e,null),t=!0},p(r,[l]){const i={};l&1&&(i.loaded=r[0]),a.$set(i)},i(r){t||(w(a.$$.fragment,r),t=!0)},o(r){S(a.$$.fragment,r),t=!1},d(r){r&&c(e),k(a)}}}let p=10,m=11;function q(o,e,a){let t,r;u(o,d,s=>a(3,t=s)),u(o,f,s=>a(0,r=s));const l=s=>f.set(s),i=t??{rows:p,cols:m,layers:{ground:new Array(p*m).fill(0).map((s,n)=>({type:Math.random()*3>1?4:0,state:0})),units:new Array(p*m).fill(0).map((s,n)=>n%m!==2?null:{type:Math.floor(Math.random()*L.length),team:n%2,state:4}),sky:new Array(p*m).fill(0).map((s,n)=>Math.floor(n/m)!==2?null:{type:Math.floor(Math.random()*2),state:0})},filters:{ground:s=>s.map(n=>n.type),units:s=>s.filter(n=>n!==null).map(n=>n.type),sky:s=>s.filter(n=>n!==null).map(n=>n.type)}};return d.set(i),[r,l,i]}class P extends g{constructor(e){super(),_(this,e,q,j,h,{})}}function R(o){let e,a;return e=new P({}),{c(){$(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,r){M(e,t,r),a=!0},p:C,i(t){a||(w(e.$$.fragment,t),a=!0)},o(t){S(e.$$.fragment,t),a=!1},d(t){k(e,t)}}}class F extends g{constructor(e){super(),_(this,e,null,R,h,{})}}export{F as component};
