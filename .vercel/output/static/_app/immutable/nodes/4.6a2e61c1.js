import{s as u,f,g as $,h as k,d as c,j as A,i as h,E as D,T as I,V as b,r as _}from"../chunks/scheduler.4123ea5a.js";import{S as g,i as M,b as v,d as y,m as w,a as C,t as S,e as x}from"../chunks/index.ccd460da.js";import{M as q,c as E,l as p,u as L,a as P,m as d}from"../chunks/mapStore.0412660f.js";function V(o){let e,a="loading...";return{c(){e=f("p"),e.textContent=a},l(t){e=$(t,"P",{"data-svelte-h":!0}),b(e)!=="svelte-qeejp2"&&(e.textContent=a)},m(t,n){h(t,e,n)},p:_,d(t){t&&c(e)}}}function j(o){let e,a,t;return a=new q({props:{map:o[2],makeImage:E(o[1]),loaded:o[0],$$slots:{default:[V]},$$scope:{ctx:o}}}),{c(){e=f("div"),v(a.$$.fragment),this.h()},l(n){e=$(n,"DIV",{class:!0});var r=k(e);y(a.$$.fragment,r),r.forEach(c),this.h()},h(){A(e,"class","p-6 h-screen")},m(n,r){h(n,e,r),w(a,e,null),t=!0},p(n,[r]){const s={};r&1&&(s.loaded=n[0]),r&8&&(s.$$scope={dirty:r,ctx:n}),a.$set(s)},i(n){t||(C(a.$$.fragment,n),t=!0)},o(n){S(a.$$.fragment,n),t=!1},d(n){n&&c(e),x(a)}}}let m=100,i=100;function R(o,e,a){let t;D(o,p,s=>a(0,t=s));const n=s=>p.set(s),r=I(d)??{rows:m,cols:i,layers:{ground:new Array(m*i).fill(0).map((s,l)=>({type:Math.random()*3>1?15:0,state:0})),units:new Array(m*i).fill(0).map((s,l)=>Math.random()*4>1?null:{type:Math.floor(Math.random()*L.length),tile:l*i+m,team:l%2,state:4}),sky:new Array(m*i).fill(0).map((s,l)=>Math.random()*100>7?null:{type:Math.floor(Math.random()*2),tile:l*i+m,state:0})}};return r.layers.ground.map((s,l)=>s.state=P(s)(r,l)),d.set(r),[t,n,r]}class T extends g{constructor(e){super(),M(this,e,R,j,u,{})}}function z(o){let e,a;return e=new T({}),{c(){v(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){w(e,t,n),a=!0},p:_,i(t){a||(C(e.$$.fragment,t),a=!0)},o(t){S(e.$$.fragment,t),a=!1},d(t){x(e,t)}}}class H extends g{constructor(e){super(),M(this,e,null,z,u,{})}}export{H as component};
